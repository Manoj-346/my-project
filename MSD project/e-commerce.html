<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MH Shoppy</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white flex flex-col min-h-screen">

  <!-- Navbar -->
  <header class="bg-gray-800 shadow-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 flex justify-between items-center py-3">
      <!-- Logo -->
      <div class="flex items-center space-x-3">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4HqDJ4ZykuXuPKiiBQv9X60qxfqC8HOTd1w&s"
             alt="MH Shoppy Logo" class="w-12 h-12 rounded-full border-2 border-indigo-500">
        <h1 class="text-2xl font-bold text-indigo-400">MH Shoppy</h1>
      </div>

      <!-- Navigation (Desktop) -->
      <nav class="hidden md:flex space-x-6 text-gray-300 font-medium">
        <a href="#" class="hover:text-indigo-400">Home</a>
        <a href="#products" class="hover:text-indigo-400">Products</a>
        <a href="#about" class="hover:text-pink-400">About</a>
        <a href="#contact" class="hover:text-indigo-400">Contact</a>
      </nav>

      <!-- Buttons -->
      <div class="flex items-center space-x-4">
        <button id="wishlistBtn" class="bg-pink-600 px-4 py-2 rounded-lg hover:bg-pink-700">Wishlist ‚ù§Ô∏è</button>
        <button id="cartBtn" class="bg-indigo-600 px-4 py-2 rounded-lg hover:bg-indigo-700">Cart üõí</button>
        <!-- Mobile menu button -->
        <button id="mobileMenuBtn" class="md:hidden text-gray-300 hover:text-white text-2xl">‚ò∞</button>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="hidden md:hidden bg-gray-700 flex-col space-y-3 px-4 pb-4">
      <a href="#" class="block py-2 border-b border-gray-600 hover:text-indigo-400">Home</a>
      <a href="#products" class="block py-2 border-b border-gray-600 hover:text-indigo-400">Products</a>
      <a href="#about" class="block py-2 border-b border-gray-600 hover:text-pink-400">About</a>
      <a href="#contact" class="block py-2 hover:text-indigo-400">Contact</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="text-center py-12 bg-gradient-to-r from-indigo-800 to-indigo-600">
    <h2 class="text-4xl font-bold mb-4">Welcome to MH Shoppy</h2>
    <p class="text-gray-200">Find the best products at unbeatable prices</p>
  </section>

  <!-- Products -->
  <section id="products" class="max-w-7xl mx-auto px-4 py-12 flex-grow">
    <h3 class="text-3xl font-bold mb-8 text-center">Our Products</h3>
    <div id="product-grid" class="grid gap-8 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
      <!-- Products load here -->
    </div>
    <div class="flex justify-center mt-8">
      <button id="loadMoreBtn" class="bg-gray-700 text-white px-6 py-2 rounded-lg hover:bg-gray-600 hidden">
        Load More
      </button>
    </div>
  </section>

  <!-- Cart Sidebar -->
  <div id="cartSidebar"
       class="fixed top-0 right-0 w-80 h-full bg-gray-800 shadow-2xl transform translate-x-full transition-transform duration-300 z-50 flex flex-col">
    <div class="flex justify-between items-center p-4 border-b border-gray-700">
      <h3 class="text-xl font-semibold">Your Cart</h3>
      <button id="closeCart" class="text-gray-400 hover:text-white">‚úñ</button>
    </div>
    <div id="cartItems" class="flex-1 overflow-y-auto p-4 space-y-4"></div>
    <div class="p-4 border-t border-gray-700">
      <p class="text-lg font-semibold">Total: $<span id="cartTotal">0.00</span></p>
      <button class="w-full mt-3 bg-indigo-600 py-2 rounded-lg hover:bg-indigo-700">
        Proceed to Checkout
      </button>
    </div>
  </div>

  <!-- Wishlist Sidebar -->
  <div id="wishlistSidebar"
       class="fixed top-0 right-0 w-80 h-full bg-gray-800 shadow-2xl transform translate-x-full transition-transform duration-300 z-50 flex flex-col">
    <div class="flex justify-between items-center p-4 border-b border-gray-700">
      <h3 class="text-xl font-semibold">Your Wishlist</h3>
      <button id="closeWishlist" class="text-gray-400 hover:text-white">‚úñ</button>
    </div>
    <div id="wishlistItems" class="flex-1 overflow-y-auto p-4 space-y-4"></div>
  </div>

  <!-- Footer -->
  <footer id="contact" class="bg-gray-800 mt-12">
    <div class="max-w-7xl mx-auto px-6 py-10 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8">
      <div>
        <h4 class="text-lg font-semibold text-indigo-400 mb-3">About Us</h4>
        <p class="text-gray-400 text-sm">
          MH Shoppy is your one-stop online store for the latest products at affordable prices.
        </p>
      </div>
      <div>
        <h4 class="text-lg font-semibold text-indigo-400 mb-3">Quick Links</h4>
        <ul class="space-y-2 text-gray-400 text-sm">
          <li><a href="#products" class="hover:text-white">Products</a></li>
          <li><a href="#cart" class="hover:text-white">Cart</a></li>
          <li><a href="#wishlist" class="hover:text-white">Wishlist</a></li>
        </ul>
      </div>
      <div>
        <h4 class="text-lg font-semibold text-indigo-400 mb-3">Contact</h4>
        <p class="text-gray-400 text-sm">üìç Hyderabad, India</p>
        <p class="text-gray-400 text-sm">üìß support@mhshoppy.com</p>
        <p class="text-gray-400 text-sm">üìû +91 98765 43210</p>
      </div>
      <div>
        <h4 class="text-lg font-semibold text-indigo-400 mb-3">Follow Us</h4>
        <div class="flex space-x-4 text-gray-400">
          <a href="#" class="hover:text-white">üåê</a>
          <a href="#" class="hover:text-white">üê¶</a>
          <a href="#" class="hover:text-white">üìò</a>
          <a href="#" class="hover:text-white">üì∏</a>
        </div>
      </div>
    </div>
    <div class="bg-gray-900 text-center text-gray-500 text-sm py-4 border-t border-gray-700">
      ¬© 2025 MH Shoppy. All rights reserved.
    </div>
  </footer>

  <!-- JS -->
  <script>
    let cart = [];
    let wishlist = [];
    let products = [];
    let currentPage = 1;
    const perPage = 8;
    const productGrid = document.getElementById('product-grid');
    const cartSidebar = document.getElementById('cartSidebar');
    const wishlistSidebar = document.getElementById('wishlistSidebar');
    const cartItemsEl = document.getElementById('cartItems');
    const wishlistItemsEl = document.getElementById('wishlistItems');
    const cartTotalEl = document.getElementById('cartTotal');
    const loadMoreBtn = document.getElementById('loadMoreBtn');

    // Fetch Products
    async function fetchProducts() {
      try {
        const res = await fetch('https://fakestoreapi.com/products');
        products = await res.json();
        renderProducts();
        if (products.length > perPage) {
          loadMoreBtn.classList.remove('hidden');
        }
      } catch (error) {
        productGrid.innerHTML = '<p class="col-span-full text-center text-red-500">Failed to load products.</p>';
      }
    }

    // Render Products
    function renderProducts() {
      const start = (currentPage - 1) * perPage;
      const end = start + perPage;
      const pageProducts = products.slice(start, end);

      pageProducts.forEach(product => {
        const card = document.createElement('div');
        card.className = "bg-gray-800 rounded-2xl shadow-md overflow-hidden hover:shadow-xl transition";
        card.innerHTML = `
          <img src="${product.image}" alt="${product.title}" class="w-full h-48 object-contain bg-gray-700">
          <div class="p-4">
            <h4 class="text-lg font-semibold line-clamp-2 text-white">${product.title}</h4>
            <p class="text-gray-400 mb-2">$${product.price}</p>
            <div class="flex space-x-2">
              <button class="addToCart flex-1 bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700"
                data-id="${product.id}" data-title="${product.title}" data-price="${product.price}" data-image="${product.image}">
                Add to Cart
              </button>
              <button class="addToWishlist flex-1 bg-pink-600 text-white py-2 rounded-lg hover:bg-pink-700"
                data-id="${product.id}" data-title="${product.title}" data-price="${product.price}" data-image="${product.image}">
                ‚ù§Ô∏è
              </button>
            </div>
          </div>`;
        productGrid.appendChild(card);
      });

      // Rebind event listeners for new buttons
      document.querySelectorAll('.addToCart').forEach(btn => {
        btn.onclick = (e) => {
          const { id, title, price, image } = e.target.dataset;
          addToCart({ id, title, price: parseFloat(price), image });
        };
      });

      document.querySelectorAll('.addToWishlist').forEach(btn => {
        btn.onclick = (e) => {
          const { id, title, price, image } = e.target.dataset;
          addToWishlist({ id, title, price: parseFloat(price), image });
        };
      });

      // Hide Load More if no more products
      if (end >= products.length) {
        loadMoreBtn.classList.add('hidden');
      }
    }

    // Load More Button
    loadMoreBtn.addEventListener('click', () => {
      currentPage++;
      renderProducts();
    });

    // Wishlist
    function addToWishlist(product) {
      if (!wishlist.find(p => p.id == product.id)) {
        wishlist.push(product);
      }
      renderWishlist();
    }

    function renderWishlist() {
      wishlistItemsEl.innerHTML = '';
      wishlist.forEach(item => {
        const row = document.createElement('div');
        row.className = "flex items-center space-x-3 bg-gray-700 p-3 rounded-lg";
        row.innerHTML = `
          <img src="${item.image}" class="w-12 h-12 object-contain bg-white rounded">
          <div class="flex-1">
            <h4 class="text-sm font-semibold">${item.title}</h4>
            <p class="text-gray-300">$${item.price}</p>
          </div>
          <button class="removeWishlist text-red-500" data-id="${item.id}">‚úñ</button>`;
        wishlistItemsEl.appendChild(row);
      });

      document.querySelectorAll('.removeWishlist').forEach(btn => {
        btn.onclick = () => {
          wishlist = wishlist.filter(p => p.id != btn.dataset.id);
          renderWishlist();
        };
      });
    }

    // Cart
    function addToCart(product) {
      const existing = cart.find(p => p.id == product.id);
      if (existing) {
        existing.qty++;
      } else {
        cart.push({ ...product, qty: 1 });
      }
      renderCart();
    }

    function renderCart() {
      cartItemsEl.innerHTML = '';
      let total = 0;
      cart.forEach(item => {
        const subtotal = item.price * item.qty;
        total += subtotal;
        const row = document.createElement('div');
        row.className = "flex items-center space-x-3 bg-gray-700 p-3 rounded-lg";
        row.innerHTML = `
          <img src="${item.image}" class="w-12 h-12 object-contain bg-white rounded">
          <div class="flex-1">
            <h4 class="text-sm font-semibold">${item.title}</h4>
            <p class="text-gray-300">$${item.price} √ó ${item.qty} = $${subtotal.toFixed(2)}</p>
            <div class="flex items-center mt-1 space-x-2">
              <button class="decrease px-2 bg-gray-600 rounded" data-id="${item.id}">-</button>
              <span>${item.qty}</span>
              <button class="increase px-2 bg-gray-600 rounded" data-id="${item.id}">+</button>
              <button class="remove text-red-500 ml-3" data-id="${item.id}">Remove</button>
            </div>
          </div>`;
        cartItemsEl.appendChild(row);
      });
      cartTotalEl.textContent = total.toFixed(2);

      document.querySelectorAll('.increase').forEach(btn => {
        btn.onclick = () => {
          const item = cart.find(p => p.id == btn.dataset.id);
          item.qty++;
          renderCart();
        };
      });
      document.querySelectorAll('.decrease').forEach(btn => {
        btn.onclick = () => {
          const item = cart.find(p => p.id == btn.dataset.id);
          item.qty--;
          if (item.qty <= 0) cart = cart.filter(p => p.id != item.id);
          renderCart();
        };
      });
      document.querySelectorAll('.remove').forEach(btn => {
        btn.onclick = () => {
          cart = cart.filter(p => p.id != btn.dataset.id);
          renderCart();
        };
      });
    }

    // Sidebar toggle
    document.getElementById('cartBtn').addEventListener('click', () => {
      cartSidebar.classList.remove('translate-x-full');
      wishlistSidebar.classList.add('translate-x-full');
    });
    document.getElementById('closeCart').addEventListener('click', () => {
      cartSidebar.classList.add('translate-x-full');
    });

    document.getElementById('wishlistBtn').addEventListener('click', () => {
      wishlistSidebar.classList.remove('translate-x-full');
      cartSidebar.classList.add('translate-x-full');
    });
    document.getElementById('closeWishlist').addEventListener('click', () => {
      wishlistSidebar.classList.add('translate-x-full');
    });

    // Mobile Menu toggle
    document.getElementById('mobileMenuBtn').addEventListener('click', () => {
      document.getElementById('mobileMenu').classList.toggle('hidden');
    });

    fetchProducts();
  </script>
</body>
</html>
